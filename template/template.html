<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Skyblock Guide</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="templatestyle.css">
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const smallBoxes = document.querySelectorAll(".small-box");
        let currentIndex = 0;
        let currentlyOpenedBox = null;
        const menu = document.querySelector(".menu");
        const hamburgerMenu = document.querySelector(".hamburger-menu");
        const closeMenu = document.querySelector(".close-menu");

        hamburgerMenu.addEventListener("click", () => {
          menu.classList.toggle("open");
        });

        closeMenu.addEventListener("click", () => {
          menu.classList.remove("open");
        });

        function updateCarousel() {
          smallBoxes.forEach((box, index) => {
            box.classList.remove("opened");
            if (index === currentIndex) {
              box.classList.add("opened");
            }
          });
        }

        function nextBox() {
          currentIndex = (currentIndex + 1) % smallBoxes.length;
          updateCarousel();
        }

        function prevBox() {
          currentIndex =
            (currentIndex - 1 + smallBoxes.length) % smallBoxes.length;
          updateCarousel();
        }

        const nextArrow = document.querySelector(".carousel-arrow.next");
        const prevArrow = document.querySelector(".carousel-arrow.prev");

        nextArrow.addEventListener("click", nextBox);
        prevArrow.addEventListener("click", prevBox);

        smallBoxes.forEach((box, index) => {
          const header = box.querySelector(".small-box-header");
          header.addEventListener("click", () => {
            const arrow = header.querySelector(".arrow");
            box.classList.toggle("collapsed");
            arrow.classList.toggle("collapsed");

            // Mobile specific behavior
            if (window.innerWidth <= 768) {
              if (currentlyOpenedBox && currentlyOpenedBox !== box) {
                currentlyOpenedBox.classList.remove("opened");
                currentlyOpenedBox
                  .querySelector(".arrow")
                  .classList.add("collapsed");
                currentlyOpenedBox.classList.add("collapsed");
              }
              if (box.classList.contains("collapsed")) {
                box.classList.remove("opened");
              } else {
                box.classList.add("opened");
                currentlyOpenedBox = box;
                currentIndex = index;
              }
            }
          });
        });

        // Initialize carousel display
        updateCarousel();
      });
      function openUserModal() {
        document.getElementById("userModal").style.display = "block";
      }

      function closeUserModal() {
        document.getElementById("userModal").style.display = "none";
      }

      function relinkUser() {
        // Your relink functionality here
        alert("Relink button clicked");
      }

      // Close modal when clicking outside of it
      window.onclick = function (event) {
        const modal = document.getElementById("userModal");
        if (event.target === modal) {
          closeUserModal();
        }
      };
      document.addEventListener("DOMContentLoaded", function() {
            // Generate the progress chart
            const progressChartElement = document.getElementById('progressChart');
            if (progressChartElement) {
                const progressChartContext = progressChartElement.getContext('2d');
                const progressChart = new Chart(progressChartContext, {
                    type: 'doughnut',
                    data: {
                        labels: ['Progress', 'Remaining'],
                        datasets: [{
                            data: [70, 30], // Adjust values to represent progress
                            backgroundColor: ['#D5A33A', '#3e3e3e'],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        cutout: '70%',
                        responsive: true,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                enabled: false
                            }
                        }
                    }
                });

                // Set the center text dynamically
                document.getElementById('progressNumber').textContent = '56';
                document.getElementById('progressPercentage').textContent = '22%';
            }
        });
    </script>
  </head>
  <body>
    <nav>
      <div class="hamburger-menu">â˜°</div>
      <div class="user-icon" onclick="openUserModal()">ðŸ‘¤</div>

      <div id="userModal" class="user-modal">
        <div class="user-modal-content">
          <span class="user-modal-close" onclick="closeUserModal()"
            >&times;</span
          >
          <h2>linkedUser</h2>
          <p><i>last updated 2:07</i></p>
          <button class="user-relink-btn" onclick="relinkUser()">Relink</button>
        </div>
      </div>
    </nav>
    <div class="menu">
      <span class="close-menu">âœ–</span>
      <h1><a href="#" style="font-size:1em;">SkyblockGuide</a></h1>
      <ul>
        <li><a href="#">Combat</a></li>
        <li><a href="#">Mining</a></li>
        <li><a href="#" class="menu-selected">Farming</a></li>
        <li><a href="#">Foraging</a></li>
        <li><a href="#">Fishing</a></li>
        <li><a href="#">Enchanting</a></li>
        <li><a href="#">Alchemy</a></li>
        <li><a href="#">Taming</a></li>
        <li><a href="#">Dungeons</a></li>
        <li><a href="#">Carpentry</a></li>
      </ul>
    </div>

    <div class="skill-info">
      <div class="skill-info-left-wrapper">
        <div class="progress-chart-container">
          <canvas id="progressChart"></canvas>
          <div class="progress-chart-center-text" id="progressChartCenterText">
              <div class="number" id="progressNumber">56</div>
              <div class="percentage" id="progressPercentage">22%</div>
          </div>
      </div>
        <div class="skill-name">
          <h1>SKILLNAME</h1>
          <i>Gamemode</i>
        </div>  
      </div>
      <div class="ranking-container">
        <h3>THIS IS UNDER CONSTRUCTION</h3>
        <h4>COUNSTRTIOn</h4>
      </div>
    </div>

    <div class="content">
      <div class="left-column">
        <div class="big-box">
          <h1>Your Progress</h1>
          <p>Blah blah blah blah</p></br>
          <p>Blah blah blah blah</p></br>
          <p>Blah blah blah blah</p></br>
        </div>
      </div>
      <div class="right-column">
        <div class="carousel">
          <div class="carousel-arrow prev" onclick="prevBox()">&#8249;</div>
          <div class="carousel-content">
            <div class="small-box opened">
              <div class="small-box-header">
                <div class="small-box-title">Gear</div>
                <div class="arrow" style="font-size: 28px">â–¼</div>
              </div>
              <div class="small-box-content">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus
                lacinia odio vitae vestibulum vestibulum. Cras venenatis euismod
                malesuada.
              </div>
            </div>
            <div class="small-box">
              <div class="small-box-header">
                <div class="small-box-title">FF Upgrade</div>
                <div class="arrow" style="font-size: 28px">â–¼</div>
              </div>
              <div class="small-box-content">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus
                lacinia odio vitae vestibulum vestibulum. Cras venenatis euismod
                malesuada.
              </div>
            </div>
            <div class="small-box">
              <div class="small-box-header">
                <div class="small-box-title">Best Pet</div>
                <div class="arrow" style="font-size: 28px">â–¼</div>
              </div>
              <div class="small-box-content">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus
                lacinia odio vitae vestibulum vestibulum. Cras venenatis euismod
                malesuada.
              </div>
            </div>
            <div class="small-box">
              <div class="small-box-header">
                <div class="small-box-title">Medals</div>
                <div class="arrow" style="font-size: 28px">â–¼</div>
              </div>
              <div class="small-box-content">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus
                lacinia odio vitae vestibulum vestibulum. Cras venenatis euismod
                malesuada.
              </div>
            </div>
            <div class="small-box">
              <div class="small-box-header">
                <div class="small-box-title">Farming Wisdom</div>
                <div class="arrow" style="font-size: 28px">â–¼</div>
              </div>
              <div class="small-box-content">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus
                lacinia odio vitae vestibulum vestibulum. Cras venenatis euismod
                malesuada.
              </div>
            </div>
            <div class="small-box">
              <div class="small-box-header">
                <div class="small-box-title">Cheapest Pest Chance</div>
                <div class="arrow" style="font-size: 28px">â–¼</div>
              </div>
              <div class="small-box-content">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus
                lacinia odio vitae vestibulum vestibulum. Cras venenatis euismod
                malesuada.
              </div>
            </div>
            <div class="small-box">
              <div class="small-box-header">
                <div class="small-box-title">Small Box 7</div>
                <div class="arrow" style="font-size: 28px">â–¼</div>
              </div>
              <div class="small-box-content">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus
                lacinia odio vitae vestibulum vestibulum. Cras venenatis euismod
                malesuada.
              </div>
            </div>
            <div class="small-box">
              <div class="small-box-header">
                <div class="small-box-title">Small Box 8</div>
                <div class="arrow" style="font-size: 28px">â–¼</div>
              </div>
              <div class="small-box-content">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus
                lacinia odio vitae vestibulum vestibulum. Cras venenatis euismod
                malesuada.
              </div>
            </div>
          </div>
          <div class="carousel-arrow next" onclick="nextBox()">&#8250;</div>
        </div>
      </div>
    </div>

    <footer>
      <a href="https://github.com/rockyhenderson" target="_blank">My GitHub</a>
      <p>&copy; 2024 Jack Iuean Rocky Henderson</p>
    </footer>
  </body>
</html>
